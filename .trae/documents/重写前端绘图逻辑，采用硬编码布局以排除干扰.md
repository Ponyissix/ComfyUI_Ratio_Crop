# 终极修复方案：简化绘图逻辑

用户反馈依然无法显示绿框，这表明之前的动态计算高度、坐标转换或绘图层级可能存在深层问题。为了彻底解决，我将采用**最简单、最粗暴**的方式重写前端绘图逻辑。

## 核心变更

1.  **放弃动态高度计算**：
    *   不再去算 `getWidgetsHeight()`，直接假定 Widgets 占用顶部空间（例如 50px）。
    *   绘图区域固定从 y=50 开始，填满剩余空间。

2.  **强制覆盖模式**：
    *   在 `onDrawForeground` 中，先画一个鲜艳的背景色（调试用），确保绘图区域是正确的。
    *   然后画原图。
    *   最后画绿框。

3.  **图片加载增强**：
    *   增加对 `subfolder` 的支持（虽然标准上传通常在根目录，但以防万一）。
    *   确保图片加载成功后再触发重绘。

4.  **调试反馈**：
    *   如果在节点上看不到图，至少能看到一个占位符或错误提示，而不是一片黑。

## 代码逻辑

```javascript
// 伪代码
const topPadding = 50; // 给 Widgets 留的空间
const drawW = this.size[0] - 20;
const drawH = this.size[1] - topPadding - 10;

// 1. 画背景 (深灰)
ctx.fillStyle = "#111";
ctx.fillRect(10, topPadding, drawW, drawH);

// 2. 画图
if (this.img) {
   // 计算缩放并居中
   // ...
   ctx.drawImage(this.img, ...);
   
   // 3. 画框
   // ...
} else {
   // 显示 "Loading..." 文字
}
```

这个方案排除了所有复杂的依赖，直接操作 Canvas 像素。如果这样还不行，那就是 ComfyUI 的环境有问题（极小概率）。

请确认执行。