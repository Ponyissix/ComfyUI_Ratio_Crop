# 修复节点显示 Bug 计划

你遇到的问题是由于**裁切参数（宽度/高度）可能大于当前图片尺寸**，导致绿色的示意框画到了节点外面。我们需要在绘制时对这些参数进行限制（Clamping），并增加绘图区域裁剪（Clipping）。

## 实施步骤

1.  **修改 `js/crop_ui.js` 中的 `onDrawForeground` 方法**：
    *   **增加裁剪保护**：使用 `ctx.clip()` 将绘图区域严格限制在图片预览范围内，防止任何内容画出界。
    *   **坐标修正**：在绘制绿框前，模仿后端 Python 的逻辑，计算“实际有效”的裁切区域。
        *   例如：如果 `crop_w` 是 2200 但图片只有 500 宽，绘图时强制按 500 画。
        *   这样绿框显示的才是最终真正会输出的范围。

2.  **预期效果**：
    *   绿框将永远不会超出图片边界。
    *   即使输入了很大的裁切数值，绿框也会自动缩小匹配图片边缘，所见即所得。

请确认是否执行此修复。