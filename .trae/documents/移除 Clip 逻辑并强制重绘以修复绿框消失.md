# 修复绿框不显示问题

问题可能出在**绘图坐标的计算**或者**绘图顺序**上。之前的修复引入了 `ctx.clip()`，如果计算的 `drawW/drawH` 和实际绘图区域有偏差，可能导致整个内容被裁剪掉了。或者 `scale` 计算错误导致框画在了可视区域外。

## 修复计划

1.  **移除 Clip 逻辑（暂时）**：为了排除 `ctx.clip()` 误杀的可能性，我将暂时移除它，优先确保框能画出来。
2.  **强制重绘**：在 `onDrawForeground` 中添加更明显的调试颜色，确保绘图函数确实被调用了。
3.  **坐标检查**：仔细检查 `startX, startY` 和 `scale` 的计算。特别是 `this.img.width` 是否已经加载完成。
4.  **简化绘图**：先画一个固定的红框在 `(0,0)` 看看能不能显示，确认 Canvas 上下文是正常的。

## 具体步骤

1.  修改 `js/crop_ui.js`：
    *   移除 `ctx.clip()`。
    *   在 `ctx.strokeRect` 前打印日志（通过 `console.log`，你需要打开浏览器控制台查看，或者我直接画一个显眼的红框）。
    *   确保 `scale` 计算正确：`scale = drawW / this.img.width`。

我将直接修改代码，去掉 clip，并调整绘制逻辑以确保可见。